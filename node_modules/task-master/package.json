{
  "name": "task-master",
  "description": "A helper to make Grunt task declaration and organization cleaner.",
  "version": "2.2.0",
  "author": {
    "name": "Andrew Nichols",
    "email": "tandrewnichols@gmail.com"
  },
  "repository": {
    "type": "git",
    "url": "git://github.com/tandrewnichols/task-master.git"
  },
  "homepage": "http://www.tandrewnichols.me/modules/task-master",
  "bugs": {
    "url": "https://github.com/tandrewnichols/task-master/issues"
  },
  "licenses": [
    {
      "type": "MIT",
      "url": "https://github.com/tandrewnichols/task-master/blob/master/LICENSE"
    }
  ],
  "scripts": {
    "test": "grunt",
    "publish": "if echo $USERNAME | grep -cq 'anichols'; then publisher run; fi"
  },
  "dependencies": {
    "config-extend": "0.0.7",
    "file-manifest": "^1.0.3",
    "glob": "^4.0.6",
    "jit-grunt": "^0.8.0",
    "lodash": "^2.4.1",
    "safe-obj": "^1.0.2",
    "yamljs": "^0.2.0"
  },
  "devDependencies": {
    "caller-id": "^0.1.0",
    "coffee-script": "^1.8.0",
    "grunt": "^0.4.5",
    "grunt-contrib-jshint": "^0.10.0",
    "grunt-mocha-cov": "^0.3.0",
    "grunt-mocha-test": "^0.11.0",
    "grunt-travis-matrix": "0.0.4",
    "indeed": "^1.0.6",
    "jshint-stylish": "^0.4.0",
    "mocha": "git://github.com/tandrewnichols/mocha.git#suppress-stack",
    "mocha-given": "git://github.com/tandrewnichols/mocha-given.git",
    "mocha-lcov-reporter": "0.0.1",
    "proxyquire": "^1.0.1",
    "sinon": "^1.10.3"
  },
  "keywords": [
    "grunt",
    "gruntfile",
    "tasks",
    "task management",
    "configuration",
    "abstraction"
  ],
  "main": "./lib/task-master",
  "config": {
    "blanket": {
      "pattern": [
        "task-master/lib"
      ]
    }
  },
  "readme": "[![Build Status](https://travis-ci.org/tandrewnichols/task-master.png)](https://travis-ci.org/tandrewnichols/task-master) [![downloads](http://img.shields.io/npm/dm/task-master.svg)](https://npmjs.org/package/task-master) [![npm](http://img.shields.io/npm/v/task-master.svg)](https://npmjs.org/package/task-master) [![Code Climate](https://codeclimate.com/github/tandrewnichols/task-master/badges/gpa.svg)](https://codeclimate.com/github/tandrewnichols/task-master) [![Test Coverage](https://codeclimate.com/github/tandrewnichols/task-master/badges/coverage.svg)](https://codeclimate.com/github/tandrewnichols/task-master) [![dependencies](https://david-dm.org/tandrewnichols/task-master.png)](https://david-dm.org/tandrewnichols/task-master)\n\n[![NPM info](https://nodei.co/npm/task-master.png?downloads=true)](https://nodei.co/npm/task-master.png?downloads=true)\n\n# task-master\n\nA helper to make Grunt task declaration and organization cleaner.\n\n## Installation\n\n`npm install task-master --save-dev`\n\n## Summary\n\n`grunt.loadTasks` is a nice way to separate out tasks into separate files and keep your Gruntfile from getting hairy, but there's no clean way to do the same with configuration. This module is a small wrapper that allows both tasks and configuration to be abstracted out of your Gruntfile into separate modules.\n\n**NOTE: This is different than `taskmaster` (without the hyphen), which is some sort of task runner written by someone who must not know that grunt exists.**\n\n## Usage\n\nStep 1: Define your tasks and configuration in separate files where the name of the file corresponds to the name of the task. (Task-master can load `.js`, `.coffee`, `.json`, and `.yml`, so specify your configuration in whatever format you prefer. Obviously, however, if you need dynamic functionality, you'll need to use `.js` or `.coffee`.)\n\n```\ntasks\n  jshint.js\n  watch.js\n  myCustomTask.js\n```\n\nStep 2: Export either a literal configuration object or a function that accepts `grunt` and `context` (more on context below)  and returns a configuration object.\n\ntasks/jshint.js\n\n```javascript\nmodule.exports = {\n  options: {\n    curly: true,\n    eqeqeq: true\n  },\n  'default': '**/*.js'\n};\n```\n\ntasks/watch.js\n\n```javascript\nmodule.exports = {\n  js: {\n    files: '**/*.js',\n    tasks: 'jshint'\n    options: {\n      cwd: 'server'\n    }\n  }\n};\n```\n\ntasks/myCustomTask.js\n\n```javascript\nmodule.exports = function(grunt) {\n  // or registerMultiTask\n  grunt.registerTask('myCustomTask', 'A task that does really neat stuff', function() {\n    // The neat stuff...\n  });\n  // You probably don't need to return configuration for tasks you write,\n  // but you could use a function in a plugin's task configuration to do\n  // different things based on the environment (for example)\n  return {\n    options: {\n      extraNeatness: true\n    }\n  };\n};\n```\n\nAdditionally, as of version 2.2.0, you can even define target-specific configuration files in the form `tasks/<task>.<target>.{js,json,coffee,yml}`. If, for example, you have a really big `copy` task, you could break it out into target-specific files like `tasks/copy.dev.js` and `tasks/copy.dist.js`, which will result in a configuration object that looks like:\n\n```javascript\n{\n  copy: {\n    dev: {\n      // exports of copy.dev.js\n    },\n    dist: {\n      // exports of copy.dist.js\n    }\n  }\n}\n```\n\nIncidentally, this will also work with task-level options, if you define (e.g.) a `tasks/copy.options.js.`\n\nStep 3: Call task-master from your Gruntfile and pass it `grunt` and an optional options object. No need to call `initConfig` or `loadNpmTasks` as task-master does both for you.\n\nGruntfile.js\n\n```javascript\nvar taskMaster = require('task-master');\n\nmodule.exports = function(grunt) {\n  taskMaster(grunt);\n  \n  // register other tasks (like default) etc.\n};\n```\n\nIf you are not passing any options, you can actually shorten this to:\n\n```javascript\nmodule.exports = require('task-master');\n```\n\n## Options\n\nTask-master is highly configurable. You can pass any of the following options to change the default behavior.\n\n### devDependencies\n\nIndicates whether to load tasks from `devDependencies`. The default is true, and probably 99% of the time, that's what you want. I can't actually think of a time when you wouldn't want this to be true. Even if your grunt plugins are under `dependencies`, having this property set to true probably won't make a difference. But for completeness:\n\n```javascript\ntaskMaster(grunt, { devDependencies: false });\n```\n\n### dependencies\n\nIndicates whether to load tasks from `dependencies`. The default is false. Most of the time you don't need this, but there are some cases where you do, for instance for running builds on a heroku server (which runs `npm install --production` and therefore doesn't have access to `devDependencies`).\n\n```javascript\ntaskMaster(grunt, { dependencies: true });\n```\n\n### peerDependencies\n\nLoad tasks from peerDependencies. Probably don't do this unless you have a really good reason.\n\n```javascript\ntaskMaster(grunt, { peerDependencies: true });\n```\n\n### optionalDependencies\n\nLoad tasks from optionalDependencies. Again, this seems like a bad idea in general. But it's there . . . because if it's not, someone will undoubtedly want it and ask about it.\n\n```javascript\ntaskMaster(grunt, { optionalDependencies: true });\n```\n\n### pattern\n\nString or regex pattern for matching grunt plugins. Default is `/^grunt-/`.\n\n```javascript\ntaskMaster(grunt, { pattern: /^grunt-contrib-`/ }); // or 'grunt-contrib-'\n```\n\n### include\n\nTasks to include that don't match the pattern. If you have one or two plugins to load that don't start with \"grunt-\" (do such plugins exist?), it's probably better to specify them here, rather than try to write a custom pattern that will match everything you need. This can be a string plugin name or an array of string plugin names.\n\n```javascript\ntaskMaster(grunt, { include: ['not-grunt-foo', 'and-not-grunt-bar'] }); // or for one: { include: 'blah-blah' }\n```\n\n### exclude\n\nTasks to exclude that _do_ match the pattern. If you want to load all \"grunt-\" plugins, _except_ grunt-foo-bar, you can do that here. Again, this can be a string plugin name or an array of string plugin names.\n\n```javascript\ntaskMaster(grunt, { exclude: ['grunt-foo-bar'] }); // or: { exclude: 'grunt-foo-bar' }\n```\n\n### ignore\n\nFiles in the directories from which tasks are loaded that should be ignored. Files that start with `_` are ignored by default, but you can specify other filenames (relative to the directory tasks are in) to leave out of the config. Again, this can be a string or an array.\n\n```javascript\ntaskMaster(grunt, { ignore: 'configuration.json' });\n```\n\n### tasks\n\nDirectory or directories to load plugins from. Defaults to \\<project_root\\>/tasks. This can be a string or list of strings.\n\n```javascript\ntaskMaster(grunt, { tasks: 'plugins' });\n```\n\n### context\n\nContext is an object of additional properties that can be passed, which is used in a few places. It's passed to files in task directories that export functions. So if you want to use some configuration in `tasks/foo.js`, you can accept it as the second parameter:\n\n```javascript\nmodule.exports = function(grunt, context) {\n  // Do stuff with context\n};\n```\n\nMore importantly, keys under context are added to your grunt config at the top level. So if you, for instance, like having access to your package.json contents in your config, you can pass it under context:\n\n```javascript\ntaskMaster(grunt, { context: { pkg: require('./package') } });\n```\n\nThen you can use it in your interpolation as normal:\n\n```javascript\n{\n  files: {\n    'dist/<%= pkg.name %>.min.js': './src/main.js'\n  }\n}\n```\n\nThis is also useful if you reuse file patterns all over the place. Just add a `files` key under context and access them with:\n\n`<%= files.js.vendor %>`\n\n### alias\n\nAn object of aliases to add to grunt, where the key is the alias name and the value is the tasks to run.\n\n```javascript\ntaskMaster(grunt, {\n  alias: {\n    default: ['jshint', 'mocha:all'],\n    build: ['clean:dist', 'concat:dist', 'uglify:dist']\n  }\n});\n```\n\n### jit\n\nAs of version 2.2.0, `task-master` will delegate to `jit-grunt` for loading npm grunt plugins (which incidentally makes the \"dependency\" options above unnecessary, since `jit-grunt` loads from `node_modules` regardless of where in the package a dependency is defined), which can significantly speed up your build time. If you don't want to use `jit-grunt`, you can pass `jit: false`, and `task-master` will load in the way it did prior to 2.2.0. But there's basically no reason you should want to do this. Alternatively, you can pass jit as an object, and that object will be passed into `jit-grunt` as the [static-mappings](https://github.com/shootaroo/jit-grunt#static-mappings). So you can do something like this:\n\n```javascript\ntaskMaster(grunt, {\n  jit: {\n    ngtemplates: 'grunt-angular-templates',\n    spec: 'grunt-jasmine-bundle'\n  }\n});\n```\n\n## Loading from files\n\nBut the really cool thing about task-master is that you can load some of these options from files by passing a string file path (or a list of string file paths) instead of a literal object. You can even pass globstar patterns. You can load the entire options object, the context, or the aliases from a file. The following examples assume you are using the default tasks directory:\n\n```javascript\n// loads the options object from \\<project_root\\>/tasks/_opts.json\ntaskMaster(grunt, '_opts.json');\n```\n\n```javascript\n// loads aliases from \\<project_root\\>/tasks/_aliases.json AND \\<project_root\\>/tasks/_alias.js\ntaskMaster(grunt, { aliases: ['_aliases.json', '_alias.json'] });\n```\n\n```javascript\n// loads a context object from \\<project_root\\>/tasks/_context.json\n// and any files in \\<project_root\\>/tasks that start with \"_context.\"\n// and end with \".json\"\ntaskMaster(grunt, { context: ['_context.json', '_context.*.json'] });\n```\n\nThese files can be `.js`, `.coffee`, `.json`, or `.yaml` files. If they export a function, it will be invoked, which let's you programmatically determine the results. E.g.:\n\n```javascript\n// In an alias file\nmodule.exports = function() {\n  // Except . . . do something dynamic here\n  return {\n    default: ['jshint', 'mocha:all'],\n    build: ['clean:dist', 'concat:dist', 'uglify:dist']\n  };\n};\n```\n\nThe results of these files will be merged into a single object.\n\nBut it gets even better. Because I think you shouldn't have to pass a huge messy configuration object (that's exactly what this library is trying to _undo_) you can load content from files automatically if they have specific, canonical names. Just add a `\"_taskmaster.opts*.{js,coffee,json,yml}\"` to your tasks directory (or wherever you load plugins from), and it will automatically be loaded as your options. Add a `\"_taskmaster.context*.{js,coffee,json,yml}\"` for your context and a `\"_taskmaster.alias*.{js,coffee,json,yml}\"` for your aliases. And see that star hiding in the middle there? That means you can even create multiple canonical files as long as they match that pattern.\n\nWhy would you want to load configuration from multiple files you ask? I'm envisioning a team scenario where some members of the team might want to (for example) define their own task aliases that aren't part of the normal aliases. So you have a `_taskmaster.alias.json` file for all the common aliases, and then pop this in your `.gitignore`:\n\n`tasks/_aliases.json`\n\nNow each member can add their own aliases without interfering with other members. Don't like typing `grunt mochaTest`, which is the task name in the main aliases file? Just add a `tasks/_aliases.json` that looks like this:\n\n```javascript\nvar grunt = require('grunt');\n\nmodule.exports = function() {\n  grunt.renameTask('mochaTest', 'mocha');\n  return {\n    test: ['mocha'],\n    w: ['build', 'doStuff', 'mocha', 'watch']\n  };\n};\n```\n\nYou can add your own short hand aliases or combinations of tasks for testing purposes.\n\n## Overrides\n\nAs an extension of the alias overriding above, you can override task configuration by create `_taskmaster.override.<task>.{js,json,coffee,yml}` files. For instance, if you have a `tasks/copy.js`, you can add a `_taskmaster.override.copy.js` and the override exports will be merged into the regular configuration, with the overrides taking precedence. This feature is primarily for teams, so that you can add `tasks/_taskmaster.override.*` to your `.gitignore` and then setup developer-specific configuration that doesn't have to be shared by the team.\n\n## A Note on Context\n\nThe canonical context file path is included for completeness and uniformity, but astute readers will note that it is not actually necessary, since `task-master` merges files in with the filename as a property at the top level of the grunt config. This means that creating a `tasks/files.js` will have the same effect as creating a `_taskmaster.context.js` file that exports a `files` object. Which you choose will mostly depend on taste and whether you like breaking things up into smaller files or keeping everything of the same type together.\n\n## Running tests\n\n```bash\ngit clone git@github.com:tandrewnichols/task-master.git\ncd task-master\nnpm install\nnpm install grunt-cli mocha -g\ngrunt or npm test\n```\n",
  "readmeFilename": "README.md",
  "_id": "task-master@2.2.0",
  "_shasum": "93d1e343017668d37290501640aacb022bfdf23d",
  "_from": "task-master@"
}
